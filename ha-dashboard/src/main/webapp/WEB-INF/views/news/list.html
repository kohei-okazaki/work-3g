<!DOCTYPE html>
<html lang="ja"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head th:replace="layout/layout :: head_fragment(title = '健康アプリ_お知らせ一覧画面', scripts = ~{::script}, links = ~{::link})">
<link rel="stylesheet" href="../resources/css/sort.css" th:href="@{/resources/css/sort.css}">
</head>
<body>

  <div th:replace="layout/layout :: header"></div>
  <br><br><br><br><br><br>
  <div class="container border col-10">
    <h2 class="menuTitle">お知らせ一覧画面</h2>

    <div id="newsList">
      <table class="table">
        <tbody class="list">
          <tr th:class="'news-item news-toggle[' + ${news.index} + ']'" th:each="news : ${newsList}">
             <td>
               <!-- リリース情報 -->
               <span class="badge badge-primary" th:if="${news.tagColor == '1'}" th:text="${news.tagName}"></span>
               <!-- バグ情報 -->
               <span class="badge badge-danger" th:if="${news.tagColor == '2'}" th:text="${news.tagName}"></span>
               <!-- 停止情報 -->
               <span class="badge badge-warning" th:if="${news.tagColor == '3'}" th:text="${news.tagName}"></span>
             </td>
             <td th:text="${news.date}" />
             <td th:text="${news.title}" />
             <td th:id="'news-toggle-contents[' + ${news.index} + ']'" class="news-item" th:utext="${news.detail}"></td>
          </tr>
        </tbody><!-- /.list -->
      </table><!-- /.table -->
      <div class="pager">
        <ul class="pagination"></ul>
      </div><!-- /.pager -->
    </div><!-- /#newsList -->
    <br>
  </div><!-- /.container border col-10 -->
  <br>
  <div th:replace="layout/layout :: footer"></div>

  <script src="../resources/js/lib/list.js" th:src="@{/resources/js/lib/list.min.js}"></script>
  <script th:inline="javascript">
    $(function() {

      /*<![CDATA[*/
      // ページング処理
      var systemConfig = /*[[ ${systemConfig} ]]*/;
      var options = {
        valueNames: [ "date", "title" ],
        page: systemConfig.paging,
        pagination: {
          pageationClass: "pagination",
          innerWindow: 1,
          outerWindow: 1
        }
      };
      var columnList = new List("newsList", options);
      /*]]>*/

      // お知らせのToggle設定
      $.each($("tr.news-item"), function(i, val) {
        var child = $(val).children();
        child.on("click", function() {
          $(child[2]).fadeToggle(500);
        })
      });

    });
  </script>
</body>
</html>